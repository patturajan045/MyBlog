{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
  <div class="row g-5">

    <!-- Main Content Column -->
    <div class="col-lg-8">

      <!-- Article Header -->
      <header class="mb-5">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'blog:index' %}" class="text-decoration-none text-muted">Blog</a></li>
            <li class="breadcrumb-item"><a href="#" class="text-decoration-none text-muted">{{ post.Category.name }}</a></li>
            <li class="breadcrumb-item active text-dark" aria-current="page">Article</li>
          </ol>
        </nav>

        <!-- Title -->
        <h1 class="display-6 fw-bold text-dark mb-4 lh-sm" style="letter-spacing: -0.02em;">
          {{ post.title }}
        </h1>

        <!-- Meta Information -->
        <div class="d-flex flex-wrap align-items-center gap-3 text-muted mb-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-calendar3 me-2 fs-6"></i>
            <span class="fs-6">{{ post.created_at|date:"F j, Y" }}</span>
          </div>
          <div class="vr"></div>
          <div class="d-flex align-items-center">
            <i class="bi bi-clock me-2 fs-6"></i>
            <span class="fs-6">{{ post.read_time }} min read</span>
          </div>
          <div class="vr"></div>
          <div class="d-flex align-items-center">
            <span class="badge bg-primary bg-opacity-10 text-primary fw-medium px-3 py-2 rounded-pill">
              <i class="bi bi-folder2 me-1"></i>{{ post.Category.name }}
            </span>
          </div>
        </div>
      </header>

      <!-- Featured Image -->
      {% if post.img_url %}
      <figure class="mb-5">
        <img 
          src="{{ post.img_url }}" 
          alt="{{ post.title }}" 
          class="img-fluid rounded-3 shadow-sm w-100"
          style="max-height: 480px; object-fit: cover;"
          loading="lazy"
        >
        {% if post.img_caption %}
        <figcaption class="text-center text-muted mt-2 fs-6">{{ post.img_caption }}</figcaption>
        {% endif %}
      </figure>
      {% endif %}

      <!-- Article Content -->
      <article class="article-content">
        <div class="fs-5 lh-base text-dark" style="white-space: pre-line;">
          {{ post.content }}
        </div>
      </article>

      <!-- Article Footer -->
      <footer class="mt-6 pt-5 border-top">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h6 class="fw-semibold mb-3 text-dark">Share this article</h6>
            <div class="d-flex gap-2">
              <button class="btn btn-outline-primary btn-sm rounded-pill px-3 py-2">
                <i class="bi bi-twitter-x me-1"></i>Twitter
              </button>
              <button class="btn btn-outline-primary btn-sm rounded-pill px-3 py-2">
                <i class="bi bi-linkedin me-1"></i>LinkedIn
              </button>
              <button class="btn btn-outline-primary btn-sm rounded-pill px-3 py-2">
                <i class="bi bi-link-45deg me-1"></i>Copy Link
              </button>
            </div>
          </div>
          <div class="col-md-4 text-md-end mt-3 mt-md-0">
            <a href="{% url 'blog:index' %}" class="btn btn-primary rounded-pill px-4">
              <i class="bi bi-arrow-left me-1"></i>Back to Blog
            </a>
          </div>
        </div>
      </footer>

    </div>

    <!-- Sidebar Column -->
    <div class="col-lg-4">

      <!-- Related Articles -->
      <div class="sticky-top" style="top: 2rem;">
        <div class="card border-0 shadow-sm rounded-3">
          <div class="card-header bg-transparent border-0 py-4">
            <h5 class="card-title mb-0 fw-bold text-dark d-flex align-items-center">
              <i class="bi bi-collection-play text-primary me-2 fs-5"></i>
              Related Articles
            </h5>
          </div>
          <div class="card-body py-3">
            {% if related_posts %}
            <div class="vstack gap-3">
              {% for related_post in related_posts %}
              <a 
                href="{% url 'blog:details' slug=related_post.slug %}" 
                class="card related-post-card border-0 shadow-sm-hover text-decoration-none p-3 rounded-2 transition-all"
              >
                <div class="d-flex align-items-start gap-3">
                  {% if related_post.img_url %}
                  <img 
                    src="{{ related_post.img_url }}" 
                    alt="{{ related_post.title }}" 
                    class="flex-shrink-0 rounded-2"
                    style="width: 60px; height: 60px; object-fit: cover;"
                    loading="lazy"
                  >
                  {% endif %}
                  <div class="flex-grow-1">
                    <h6 class="fw-semibold text-dark mb-1 line-clamp-2 fs-6 lh-sm">{{ related_post.title }}</h6>
                    <div class="d-flex align-items-center text-muted fs-7">
                      <span>{{ related_post.created_at|date:"M j, Y" }}</span>
                      <span class="mx-1">â€¢</span>
                      <span>{{ related_post.read_time }} min</span>
                    </div>
                  </div>
                </div>
              </a>
              {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-4">
              <i class="bi bi-journal-text display-6 text-light mb-3"></i>
              <p class="text-muted mb-0 fs-6">No related articles available</p>
            </div>
            {% endif %}
          </div>
        </div>

        <!-- Newsletter Signup -->
        <div class="card border-0 bg-light rounded-3 mt-4">
          <div class="card-body text-center p-4">
            <i class="bi bi-envelope-check display-5 text-primary mb-3"></i>
            <h6 class="fw-bold text-dark mb-2">Stay Updated</h6>
            <p class="text-muted fs-6 mb-3">Get the latest articles delivered to your inbox</p>
            <form class="d-grid gap-2">
              <input type="email" class="form-control form-control-sm" placeholder="Enter your email" required>
              <button type="submit" class="btn btn-primary btn-sm rounded-pill">Subscribe</button>
            </form>
          </div>
        </div>
      </div>

    </div>

  </div>
</div>

<style>
.article-content {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
}

.article-content p {
  margin-bottom: 1.5rem;
  line-height: 1.7;
}

.article-content h2, .article-content h3 {
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  font-weight: 600;
}

.article-content h2 {
  font-size: 1.5rem;
  color: #1a1a1a;
}

.article-content h3 {
  font-size: 1.25rem;
  color: #2d2d2d;
}

.related-post-card:hover {
  transform: translateY(-2px);
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
}

.shadow-sm-hover {
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.shadow-sm-hover:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.transition-all {
  transition: all 0.3s ease;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.mt-6 {
  margin-top: 4rem;
}

.fs-7 {
  font-size: 0.75rem !important;
}

.sticky-top {
  position: sticky;
  z-index: 10;
}
</style>
{% endblock %}